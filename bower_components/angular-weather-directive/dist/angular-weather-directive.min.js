/*! angular-weather-directive 22-06-2015 */
"use strict";angular.module("weather-templates",[]);var weatherModule=angular.module("weatherModule",["weather-templates"]);weatherModule.service("weatherService",["$http",function(a){var b={curWeather:{},forecast:{},getWeather:function(c,d){return c=c||"Henry,IL",b.curWeather[c]?b.curWeather[c]:(b.curWeather[c]={temp:{},clouds:null},a.get("http://api.openweathermap.org/data/2.5/weather?q="+c+"&units="+d+"&cnt=5").success(function(a){a&&(a.main&&(b.curWeather[c].temp.current=a.main.temp,b.curWeather[c].temp.min=a.main.temp_min,b.curWeather[c].temp.max=a.main.temp_max),b.curWeather[c].clouds=a.clouds?a.clouds.all:void 0)}),b.curWeather[c])},getForecast:function(c,d){return c=c||"Henry,IL",b.forecast[c]?b.forecast[c]:(b.forecast[c]={},a.get("http://api.openweathermap.org/data/2.5/forecast/daily?q="+c+"&units="+d+"&cnt=10").success(function(a){a&&angular.copy(a,b.forecast[c])}),b.forecast[c])}};return b}]),weatherModule.filter("temp",["$filter",function(a){return function(b,c,d){c||(c=1);var e;switch(d){case"imperial":e="F";break;case"metric":e="C";break;default:e="F"}var f=a("number");return f(b,c)+"&deg;"+e}}]),weatherModule.filter("daysInTheFuture",function(){return function(a){return(new moment).add(a,"days").format("dddd<br/>MMM Do YYYY")}}),weatherModule.directive("todaysWeather",["weatherService",function(a){return{restrict:"E",replace:!0,scope:{location:"@",useGoogleImages:"=",customSize:"=?",units:"@?"},templateUrl:"templates/currentWeatherDisplay.tpl.html",link:function(b,c,d){b.customSize=b.customSize||75,b.units=b.units||"imperial",b.weather=a.getWeather(b.location,b.units)}}}]),weatherModule.directive("weatherForecast",["weatherService",function(a){return{scope:{location:"@",useGoogleImages:"=",customSize:"=?",units:"@?"},restrict:"E",replace:!0,templateUrl:"templates/forecastDisplay.tpl.html",link:function(b){b.customSize=b.customSize||50,b.units=b.units||"imperial",b.findIndex=function(a){return b.forecast.list.indexOf(a)},b.forecast=a.getForecast(b.location,b.units)}}}]),weatherModule.directive("weatherDisplay",function(){return{scope:{weather:"=",customSize:"=",useGoogleImages:"=",units:"="},restrict:"E",replace:!0,templateUrl:"templates/basicWeatherDisplay.tpl.html"}}),weatherModule.directive("weatherIcon",function(){return{restrict:"E",replace:!0,scope:{cloudiness:"@",customSize:"=",useGoogleImages:"="},link:function(a){a.getIconClass=function(){return a.cloudiness<20?"wi-day-sunny":a.cloudiness<90?"wi-day-cloudy":"wi-cloudy"}},template:"<i style='font-size:{{customSize}}px;margin-right:16px;margin-left:16px' ng-class='getIconClass()'></i>"}}),weatherModule.directive("weatherIconGoogle",function(){return{restrict:"E",replace:!0,scope:{cloudiness:"@",customSize:"=",useGoogleImages:"="},link:function(a){a.imgurl=function(){var b="https://ssl.gstatic.com/onebox/weather/128/";return a.cloudiness<20?b+"sunny.png":a.cloudiness<90?b+"partly_cloudy.png":b+"cloudy.png"}},template:"<img style='height:{{customSize}}px;width:{{customSize}}px' ng-src='{{ imgurl() }}'>"}}),angular.module("myApp",["weatherModule","ngSanitize"]),angular.module("weather-templates",["templates/basicWeatherDisplay.tpl.html","templates/currentWeatherDisplay.tpl.html","templates/forecastDisplay.tpl.html"]),angular.module("templates/basicWeatherDisplay.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/basicWeatherDisplay.tpl.html",'<div class="row">\n  <div class="col-xs-12">\n    \n    <weather-icon-google\n      cloudiness="{{ weather.clouds }}"\n      custom-size="customSize"\n      ng-if="useGoogleImages">\n    </weather-icon-google>\n\n    <weather-icon\n      cloudiness="{{ weather.clouds }}"\n      custom-size="customSize"\n      ng-if="!useGoogleImages">\n    </weather-icon>\n    \n    <span style="display:inline-block; vertical-align:middle">\n      <h3 ng-show="weather.temp.current">\n        Current: <span ng-bind-html="weather.temp.current | temp:2:units"></span>\n      </h3>\n      \n      min: <span ng-bind-html="weather.temp.min | temp:0:units"></span><br/>\n      max: <span ng-bind-html="weather.temp.max | temp:0:units"></span><br/>\n\n      <span ng-show="weather.rain">\n        <h6>\n          {{weather.rain}}% Chance of rain\n        </h6>\n      </span>\n\n      <span ng-hide="weather.rain">\n        <h6>\n          No rain expected.\n        </h6>\n      </span>\n    </span>\n  </div>\n</div>\n')}]),angular.module("templates/currentWeatherDisplay.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/currentWeatherDisplay.tpl.html",'<div>\n    <weather-display\n      weather="weather"\n      units="units"\n      use-google-images="useGoogleImages"\n      custom-size="customSize">\n    </weather-display>\n</div>')}]),angular.module("templates/forecastDisplay.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/forecastDisplay.tpl.html",'<div class="row" style="border-top:1px solid #eee">\n    <div class="col-xs-6">\n      <div class="row" ng-repeat="weather in forecast.list | limitTo:5" style="border-bottom:1px solid #eee;border-right:1px solid #eee">\n        <div class="col-xs-12">\n          <h6 ng-bind-html="(findIndex(weather)+1)|daysInTheFuture"></h6>\n          <weather-display\n                  weather="weather"\n                  custom-size="customSize"\n                  use-google-images="useGoogleImages"\n                  units="units">\n          </weather-display>  \n        </div>\n      </div>\n    </div>\n\n    <div class="col-xs-6">\n      <div class="row" ng-repeat="weather in forecast.list | limitTo:-5" style="border-bottom:1px solid #eee">\n        <div class="col-xs-12">\n          <h6 ng-bind-html="(findIndex(weather)+1)|daysInTheFuture"></h6>\n          <weather-display\n                  weather="weather"\n                  custom-size="customSize"\n                  use-google-images="useGoogleImages"\n                  units="units">\n          </weather-display>    \n        </div>\n      </div>\n    </div>\n</div>')}]);